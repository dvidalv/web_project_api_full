{"ast":null,"code":"import{Link,useHistory}from'react-router-dom';import{useState,useEffect}from'react';import Error from'./Error';import InfoTooltip from'./InfoTooltip';import{register}from'../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(_ref){let{setMessage,message}=_ref;const history=useHistory();const[popOpenSuccess,setPopOpenSuccess]=useState(false);const[popOpenFail,setPopOpenFail]=useState(false);const[error,setError]=useState('');const[formData,setFormData]=useState({email:'',password:'',confirmPassword:'',name:'Jacques Cousteau',about:'Explorador',avatar:'https://practicum-content.s3.us-west-1.amazonaws.com/resources/moved_avatar_1604080799.jpg'});useEffect(()=>{if(popOpenSuccess){setTimeout(()=>{setPopOpenSuccess(false);setFormData({name:'',about:'',avatar:'',email:'',password:''});history.push('/users/signin');},3000);}},[popOpenSuccess,history]);function handleSubmit(e){e.preventDefault();const{name,about,avatar,email,password,confirmPassword}=formData;if(password===confirmPassword){register(name,about,avatar,email,password).then(res=>{if(res.user.email){setMessage('Registro exitoso');setPopOpenSuccess(true);setError('');}if(res.err){setMessage('El correo ya existe');setPopOpenFail(true);}}).catch(err=>{console.log(err);setMessage('Error al Registrar');setPopOpenFail(true);});setError('');}else{setError('Las contraseñas no coinciden');}}const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleClosePopUp=()=>{setPopOpenFail(false);setPopOpenSuccess(false);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"register__content\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"register__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register__title\",children:\"Reg\\xEDstrate\"}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"email\",type:\"email\",placeholder:\"Correo Electronico\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"password\",type:\"password\",minLength:\"6\",placeholder:\"Contrase\\xF1a\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"confirmPassword\",minLength:\"6\",type:\"password\",placeholder:\"Repite la contrase\\xF1a\",value:formData.confirmPassword,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"name\",type:\"text\",placeholder:\"Nombre\",value:formData.name,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"about\",type:\"text\",placeholder:\"About\",value:formData.about,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"avatar\",type:\"url\",placeholder:\"Avatar\",value:formData.avatar,onChange:handleChange}),error?/*#__PURE__*/_jsx(Error,{error:error}):null,/*#__PURE__*/_jsx(\"button\",{className:\"register__button\",children:\"Reg\\xEDstrate\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"register__subtitle\",children:[\"\\xBFYa eres miembro? Inicia sesi\\xF3n \",/*#__PURE__*/_jsx(Link,{to:'/users/signin',children:\"aqu\\xED\"})]})]}),/*#__PURE__*/_jsx(InfoTooltip,{onSuccess:popOpenSuccess,onFail:popOpenFail,onClose:handleClosePopUp,message:message})]})});}export default Register;","map":{"version":3,"names":["Link","useHistory","useState","useEffect","Error","InfoTooltip","register","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","_ref","setMessage","message","history","popOpenSuccess","setPopOpenSuccess","popOpenFail","setPopOpenFail","error","setError","formData","setFormData","email","password","confirmPassword","name","about","avatar","setTimeout","push","handleSubmit","e","preventDefault","then","res","user","err","catch","console","log","handleChange","target","value","handleClosePopUp","children","className","onSubmit","type","placeholder","onChange","minLength","to","onSuccess","onFail","onClose"],"sources":["/Users/dvidalv/Dev/web_project_api_full/frontend/src/components/Register.js"],"sourcesContent":["import { Link, useHistory } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport Error from './Error';\nimport InfoTooltip from './InfoTooltip';\nimport { register } from '../utils/auth';\n\nfunction Register({ setMessage, message }) {\n  const history = useHistory();\n  const [popOpenSuccess, setPopOpenSuccess] = useState(false);\n  const [popOpenFail, setPopOpenFail] = useState(false);\n  const [error, setError] = useState('');\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    confirmPassword: '',\n    name: 'Jacques Cousteau',\n    about: 'Explorador',\n    avatar: 'https://practicum-content.s3.us-west-1.amazonaws.com/resources/moved_avatar_1604080799.jpg',\n  });\n\n  useEffect(() => {\n    if (popOpenSuccess) {\n      setTimeout(() => {\n        setPopOpenSuccess(false);\n        setFormData({\n          name: '',\n          about: '',\n          avatar: '',\n          email: '',\n          password: '',\n\n        });\n\n        history.push('/users/signin');\n      }, 3000);\n    }\n  }, [popOpenSuccess, history]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const { name, about, avatar, email, password, confirmPassword } = formData;\n    if (password === confirmPassword) {\n\n      register(name, about, avatar, email, password)\n        .then((res) => {\n          if (res.user.email) {\n            setMessage('Registro exitoso');\n            setPopOpenSuccess(true);\n            setError('');\n          }\n          if (res.err) {\n            setMessage('El correo ya existe');\n            setPopOpenFail(true);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setMessage('Error al Registrar');\n          setPopOpenFail(true);\n        });\n      setError('');\n    } else {\n      setError('Las contraseñas no coinciden');\n    }\n  }\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n  const handleClosePopUp = () => {\n    setPopOpenFail(false);\n    setPopOpenSuccess(false);\n  };\n\n  return (\n    <>\n      <div className=\"register__content\">\n        <form className=\"register__form\" onSubmit={handleSubmit}>\n          <h2 className=\"register__title\">Regístrate</h2>\n\n          <input\n            className=\"register__input\"\n            name=\"email\"\n            type=\"email\"\n            placeholder=\"Correo Electronico\"\n            value={formData.email}\n            onChange={handleChange}\n          />\n          <input\n            className=\"register__input\"\n            name=\"password\"\n            type=\"password\"\n            minLength=\"6\"\n            placeholder=\"Contraseña\"\n            value={formData.password}\n            onChange={handleChange}\n          />\n          <input\n            className=\"register__input\"\n            name=\"confirmPassword\"\n            minLength=\"6\"\n            type=\"password\"\n            placeholder=\"Repite la contraseña\"\n            value={formData.confirmPassword}\n            onChange={handleChange}\n          />\n          <input\n            className=\"register__input\"\n            name=\"name\"\n            type=\"text\"\n            placeholder=\"Nombre\"\n            value={formData.name}\n            onChange={handleChange}\n\n          />\n          <input\n            className=\"register__input\"\n            name=\"about\"\n            type=\"text\"\n            placeholder=\"About\"\n            value={formData.about}\n            onChange={handleChange}\n\n          />\n          <input\n            className=\"register__input\"\n            name=\"avatar\"\n            type=\"url\"\n            placeholder=\"Avatar\"\n            value={formData.avatar}\n            onChange={handleChange}\n\n          />\n          {error ? <Error error={error} /> : null}\n          <button className=\"register__button\">Regístrate</button>\n          <p className=\"register__subtitle\">\n            ¿Ya eres miembro? Inicia sesión {<Link to={'/users/signin'}>aquí</Link>}\n          </p>\n        </form>\n        <InfoTooltip\n          onSuccess={popOpenSuccess}\n          onFail={popOpenFail}\n          onClose={handleClosePopUp}\n          message={message}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default Register;\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,UAAU,KAAQ,kBAAkB,CACnD,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,OAASC,QAAQ,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzC,QAAS,CAAAC,QAAQA,CAAAC,IAAA,CAA0B,IAAzB,CAAEC,UAAU,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACvC,KAAM,CAAAG,OAAO,CAAGhB,UAAU,CAAC,CAAC,CAC5B,KAAM,CAACiB,cAAc,CAAEC,iBAAiB,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC3D,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACoB,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACsB,QAAQ,CAAEC,WAAW,CAAC,CAAGvB,QAAQ,CAAC,CACvCwB,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAAE,CACZC,eAAe,CAAE,EAAE,CACnBC,IAAI,CAAE,kBAAkB,CACxBC,KAAK,CAAE,YAAY,CACnBC,MAAM,CAAE,4FACV,CAAC,CAAC,CAEF5B,SAAS,CAAC,IAAM,CACd,GAAIe,cAAc,CAAE,CAClBc,UAAU,CAAC,IAAM,CACfb,iBAAiB,CAAC,KAAK,CAAC,CACxBM,WAAW,CAAC,CACVI,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,MAAM,CAAE,EAAE,CACVL,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAEZ,CAAC,CAAC,CAEFV,OAAO,CAACgB,IAAI,CAAC,eAAe,CAAC,CAC/B,CAAC,CAAE,IAAI,CAAC,CACV,CACF,CAAC,CAAE,CAACf,cAAc,CAAED,OAAO,CAAC,CAAC,CAE7B,QAAS,CAAAiB,YAAYA,CAACC,CAAC,CAAE,CACvBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAEP,IAAI,CAAEC,KAAK,CAAEC,MAAM,CAAEL,KAAK,CAAEC,QAAQ,CAAEC,eAAgB,CAAC,CAAGJ,QAAQ,CAC1E,GAAIG,QAAQ,GAAKC,eAAe,CAAE,CAEhCtB,QAAQ,CAACuB,IAAI,CAAEC,KAAK,CAAEC,MAAM,CAAEL,KAAK,CAAEC,QAAQ,CAAC,CAC3CU,IAAI,CAAEC,GAAG,EAAK,CACb,GAAIA,GAAG,CAACC,IAAI,CAACb,KAAK,CAAE,CAClBX,UAAU,CAAC,kBAAkB,CAAC,CAC9BI,iBAAiB,CAAC,IAAI,CAAC,CACvBI,QAAQ,CAAC,EAAE,CAAC,CACd,CACA,GAAIe,GAAG,CAACE,GAAG,CAAE,CACXzB,UAAU,CAAC,qBAAqB,CAAC,CACjCM,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,CAAC,CACDoB,KAAK,CAAED,GAAG,EAAK,CACdE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,CAChBzB,UAAU,CAAC,oBAAoB,CAAC,CAChCM,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAAC,CACJE,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,IAAM,CACLA,QAAQ,CAAC,8BAA8B,CAAC,CAC1C,CACF,CAEA,KAAM,CAAAqB,YAAY,CAAIT,CAAC,EAAK,CAC1BV,WAAW,CAAC,CACV,GAAGD,QAAQ,CACX,CAACW,CAAC,CAACU,MAAM,CAAChB,IAAI,EAAGM,CAAC,CAACU,MAAM,CAACC,KAC5B,CAAC,CAAC,CACJ,CAAC,CACD,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B1B,cAAc,CAAC,KAAK,CAAC,CACrBF,iBAAiB,CAAC,KAAK,CAAC,CAC1B,CAAC,CAED,mBACEX,IAAA,CAAAI,SAAA,EAAAoC,QAAA,cACEtC,KAAA,QAAKuC,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChCtC,KAAA,SAAMuC,SAAS,CAAC,gBAAgB,CAACC,QAAQ,CAAEhB,YAAa,CAAAc,QAAA,eACtDxC,IAAA,OAAIyC,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAC,eAAU,CAAI,CAAC,cAE/CxC,IAAA,UACEyC,SAAS,CAAC,iBAAiB,CAC3BpB,IAAI,CAAC,OAAO,CACZsB,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,oBAAoB,CAChCN,KAAK,CAAEtB,QAAQ,CAACE,KAAM,CACtB2B,QAAQ,CAAET,YAAa,CACxB,CAAC,cACFpC,IAAA,UACEyC,SAAS,CAAC,iBAAiB,CAC3BpB,IAAI,CAAC,UAAU,CACfsB,IAAI,CAAC,UAAU,CACfG,SAAS,CAAC,GAAG,CACbF,WAAW,CAAC,eAAY,CACxBN,KAAK,CAAEtB,QAAQ,CAACG,QAAS,CACzB0B,QAAQ,CAAET,YAAa,CACxB,CAAC,cACFpC,IAAA,UACEyC,SAAS,CAAC,iBAAiB,CAC3BpB,IAAI,CAAC,iBAAiB,CACtByB,SAAS,CAAC,GAAG,CACbH,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,yBAAsB,CAClCN,KAAK,CAAEtB,QAAQ,CAACI,eAAgB,CAChCyB,QAAQ,CAAET,YAAa,CACxB,CAAC,cACFpC,IAAA,UACEyC,SAAS,CAAC,iBAAiB,CAC3BpB,IAAI,CAAC,MAAM,CACXsB,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,QAAQ,CACpBN,KAAK,CAAEtB,QAAQ,CAACK,IAAK,CACrBwB,QAAQ,CAAET,YAAa,CAExB,CAAC,cACFpC,IAAA,UACEyC,SAAS,CAAC,iBAAiB,CAC3BpB,IAAI,CAAC,OAAO,CACZsB,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,OAAO,CACnBN,KAAK,CAAEtB,QAAQ,CAACM,KAAM,CACtBuB,QAAQ,CAAET,YAAa,CAExB,CAAC,cACFpC,IAAA,UACEyC,SAAS,CAAC,iBAAiB,CAC3BpB,IAAI,CAAC,QAAQ,CACbsB,IAAI,CAAC,KAAK,CACVC,WAAW,CAAC,QAAQ,CACpBN,KAAK,CAAEtB,QAAQ,CAACO,MAAO,CACvBsB,QAAQ,CAAET,YAAa,CAExB,CAAC,CACDtB,KAAK,cAAGd,IAAA,CAACJ,KAAK,EAACkB,KAAK,CAAEA,KAAM,CAAE,CAAC,CAAG,IAAI,cACvCd,IAAA,WAAQyC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAAC,eAAU,CAAQ,CAAC,cACxDtC,KAAA,MAAGuC,SAAS,CAAC,oBAAoB,CAAAD,QAAA,EAAC,wCACA,cAACxC,IAAA,CAACR,IAAI,EAACuD,EAAE,CAAE,eAAgB,CAAAP,QAAA,CAAC,SAAI,CAAM,CAAC,EACtE,CAAC,EACA,CAAC,cACPxC,IAAA,CAACH,WAAW,EACVmD,SAAS,CAAEtC,cAAe,CAC1BuC,MAAM,CAAErC,WAAY,CACpBsC,OAAO,CAAEX,gBAAiB,CAC1B/B,OAAO,CAAEA,OAAQ,CAClB,CAAC,EACC,CAAC,CACN,CAAC,CAEP,CAEA,cAAe,CAAAH,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}