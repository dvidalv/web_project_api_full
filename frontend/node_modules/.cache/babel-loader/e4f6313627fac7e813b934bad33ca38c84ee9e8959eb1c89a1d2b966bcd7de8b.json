{"ast":null,"code":"import{Link,useHistory}from'react-router-dom';import{useState,useEffect}from'react';import Error from'./Error';import InfoTooltip from'./InfoTooltip';import{register}from'../utils/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(_ref){let{setMessage,message}=_ref;const history=useHistory();const[popOpenSuccess,setPopOpenSuccess]=useState(false);const[popOpenFail,setPopOpenFail]=useState(false);const[error,setError]=useState('');const[formData,setFormData]=useState({email:'',password:'',confirmPassword:''});useEffect(()=>{if(popOpenSuccess){setTimeout(()=>{setPopOpenSuccess(false);setFormData({email:'',password:'',confirmPassword:''});history.push('/signin');},3000);}},[popOpenSuccess,history]);function handleSubmit(e){e.preventDefault();const{email,password,confirmPassword}=formData;if(password===confirmPassword){register(password,email).then(res=>{if(res.data.email){setMessage('Registro exitoso');setPopOpenSuccess(true);setError('');}if(res.err){setMessage('El correo ya existe');setPopOpenFail(true);}}).catch(err=>{setMessage('Error al registrar');setPopOpenFail(true);});setError('');}else{setError('Las contraseñas no coinciden');}}const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleClosePopUp=()=>{setPopOpenFail(false);setPopOpenSuccess(false);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"register__content\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"register__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register__title\",children:\"Reg\\xEDstrate\"}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"email\",type:\"email\",placeholder:\"Correo Electronico\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"password\",type:\"password\",placeholder:\"Contrase\\xF1a\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{className:\"register__input\",name:\"confirmPassword\",type:\"password\",placeholder:\"Repite la contrase\\xF1a\",value:formData.confirmPassword,onChange:handleChange}),error?/*#__PURE__*/_jsx(Error,{error:error}):null,/*#__PURE__*/_jsx(\"button\",{className:\"register__button\",children:\"Reg\\xEDstrate\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"register__subtitle\",children:[\"\\xBFYa eres miembro? Inicia sesi\\xF3n \",/*#__PURE__*/_jsx(Link,{to:'/signin',children:\"aqu\\xED\"})]})]}),/*#__PURE__*/_jsx(InfoTooltip,{onSuccess:popOpenSuccess,onFail:popOpenFail,onClose:handleClosePopUp,message:message})]})});}export default Register;","map":{"version":3,"names":["Link","useHistory","useState","useEffect","Error","InfoTooltip","register","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","_ref","setMessage","message","history","popOpenSuccess","setPopOpenSuccess","popOpenFail","setPopOpenFail","error","setError","formData","setFormData","email","password","confirmPassword","setTimeout","push","handleSubmit","e","preventDefault","then","res","data","err","catch","handleChange","target","name","value","handleClosePopUp","children","className","onSubmit","type","placeholder","onChange","to","onSuccess","onFail","onClose"],"sources":["/Users/dvidalv/Dev/web_project_around_auth/src/components/Register.js"],"sourcesContent":["import { Link, useHistory } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport Error from './Error';\nimport InfoTooltip from './InfoTooltip';\nimport { register } from '../utils/auth';\n\nfunction Register({ setMessage, message }) {\n  const history = useHistory();\n  const [popOpenSuccess, setPopOpenSuccess] = useState(false);\n  const [popOpenFail, setPopOpenFail] = useState(false);\n  const [error, setError] = useState('');\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n\n  useEffect(() => {\n    if (popOpenSuccess) {\n      setTimeout(() => {\n        setPopOpenSuccess(false);\n        setFormData({\n          email: '',\n          password: '',\n          confirmPassword: '',\n        });\n        history.push('/signin');\n      }, 3000);\n    }\n  }, [popOpenSuccess, history]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const { email, password, confirmPassword } = formData;\n    if (password === confirmPassword) {\n      register(password, email)\n        .then((res) => {\n          if (res.data.email) {\n            setMessage('Registro exitoso');\n            setPopOpenSuccess(true);\n            setError('');\n          }\n          if (res.err) {\n            setMessage('El correo ya existe');\n            setPopOpenFail(true);\n          }\n        })\n        .catch((err) => {\n          setMessage('Error al registrar');\n          setPopOpenFail(true);\n        });\n      setError('');\n    } else {\n      setError('Las contraseñas no coinciden');\n    }\n  }\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n  const handleClosePopUp = () => {\n    setPopOpenFail(false);\n    setPopOpenSuccess(false);\n  };\n\n  return (\n    <>\n      <div className=\"register__content\">\n        <form className=\"register__form\" onSubmit={handleSubmit}>\n          <h2 className=\"register__title\">Regístrate</h2>\n\n          <input\n            className=\"register__input\"\n            name=\"email\"\n            type=\"email\"\n            placeholder=\"Correo Electronico\"\n            value={formData.email}\n            onChange={handleChange}\n          />\n          <input\n            className=\"register__input\"\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"Contraseña\"\n            value={formData.password}\n            onChange={handleChange}\n          />\n          <input\n            className=\"register__input\"\n            name=\"confirmPassword\"\n            type=\"password\"\n            placeholder=\"Repite la contraseña\"\n            value={formData.confirmPassword}\n            onChange={handleChange}\n          />\n          {error ? <Error error={error} /> : null}\n          <button className=\"register__button\">Regístrate</button>\n          <p className=\"register__subtitle\">\n            ¿Ya eres miembro? Inicia sesión {<Link to={'/signin'}>aquí</Link>}\n          </p>\n        </form>\n        <InfoTooltip\n          onSuccess={popOpenSuccess}\n          onFail={popOpenFail}\n          onClose={handleClosePopUp}\n          message={message}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}