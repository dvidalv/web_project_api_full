{"ast":null,"code":"import url from'../utils/constants';class Api{constructor(){this._url=url;}async fetchData(url,method,data,token){try{if(method==='GET'){const resp=await fetch(\"\".concat(url),{method,headers:{authorization:\"Bearer \".concat(token),'Content-Type':'application/json'}});if(resp.ok){return await resp.json();}return await Promise.reject(\"Error: \".concat(resp.status));}if(method==='DELETE'){const resp=await fetch(\"\".concat(url),{method,headers:{authorization:\"Bearer \".concat(token),'Content-Type':'application/json'}});if(resp.ok){return await resp.json();}return await Promise.reject(\"Error: \".concat(resp.status));}const result=await fetch(\"\".concat(url),{method,headers:{authorization:\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify(data)});if(result.ok){return await result.json();}return await Promise.reject(\"Error: \".concat(result.status));}catch(error){throw error;}}async changeLikeCardStatus(id,isLike,token){return await this.fetchData(\"\".concat(this._url,\"cards/likes/\").concat(id),isLike?'PUT':'DELETE',isLike?{like:true}:{like:false},token);}async deleteCard(resource,cardId,token){return await this.fetchData(\"\".concat(this._url).concat(resource,\"/\").concat(cardId),'DELETE',null,token);}async getUserInfo(token){return await this.fetchData(\"\".concat(this._url,\"/users/me\"),'GET',null,token);}async getInitialCards(token){// console.log(this._url);\nreturn await this.fetchData(\"\".concat(this._url,\"/cards\"),'GET',null,token);}async getUserAvatar(resource){return await this.fetchData(\"\".concat(this._url,\"/\").concat(resource),'GET');}async setUserAvatar(data,token){return await this.fetchData(\"\".concat(this._url,\"/users/me/avatar\"),'PATCH',data,token);}async patchUserInfo(data,token){return await this.fetchData(\"\".concat(this._url,\"/users/me\"),'PATCH',data,token);}async addCard(newCard,token){return await this.fetchData(\"\".concat(this._url,\"/cards\"),'POST',newCard,token);}async dislikeCard(resource,card_Id){return await this.fetchData(\"\".concat(this._url,\"/\").concat(resource,\"/\").concat(card_Id),'DELETE');}}const api=new Api();export default api;","map":{"version":3,"names":["url","Api","constructor","_url","fetchData","method","data","token","resp","fetch","concat","headers","authorization","ok","json","Promise","reject","status","result","body","JSON","stringify","error","changeLikeCardStatus","id","isLike","like","deleteCard","resource","cardId","getUserInfo","getInitialCards","getUserAvatar","setUserAvatar","patchUserInfo","addCard","newCard","dislikeCard","card_Id","api"],"sources":["/Users/dvidalv/Dev/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["import url from '../utils/constants';\nclass Api {\n  constructor() {\n    this._url = url;\n  }\n  async fetchData(url, method, data, token) {\n    try {\n      if (method === 'GET') {\n        const resp = await fetch(`${url}`, {\n          method,\n          headers: {\n            authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        if (resp.ok) {\n          return await resp.json();\n        }\n        return await Promise.reject(`Error: ${resp.status}`);\n      }\n\n      if (method === 'DELETE') {\n        const resp = await fetch(`${url}`, {\n          method,\n          headers: {\n            authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        if (resp.ok) {\n          return await resp.json();\n        }\n        return await Promise.reject(`Error: ${resp.status}`);\n      }\n\n      const result = await fetch(`${url}`, {\n        method,\n        headers: {\n          authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (result.ok) {\n        return await result.json();\n      }\n\n      return await Promise.reject(`Error: ${result.status}`);\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async changeLikeCardStatus(id, isLike, token) {\n    return await this.fetchData(\n      `${this._url}cards/likes/${id}`,\n      isLike ? 'PUT' : 'DELETE',\n      isLike ? { like: true } : { like: false },\n      token\n    );\n  }\n\n  async deleteCard(resource, cardId, token) {\n    return await this.fetchData(\n      `${this._url}${resource}/${cardId}`,\n      'DELETE',\n      null,\n      token\n    );\n  }\n\n  async getUserInfo(token) {\n    return await this.fetchData(`${this._url}/users/me`, 'GET', null, token);\n  }\n\n  async getInitialCards(token) {\n    // console.log(this._url);\n    return await this.fetchData(`${this._url}/cards`, 'GET', null, token);\n  }\n\n  async getUserAvatar(resource) {\n    return await this.fetchData(`${this._url}/${resource}`, 'GET');\n  }\n  async setUserAvatar(data, token) {\n    return await this.fetchData(\n      `${this._url}/users/me/avatar`,\n      'PATCH',\n      data,\n      token\n    );\n  }\n\n  async patchUserInfo(data, token) {\n    return await this.fetchData(`${this._url}/users/me`, 'PATCH', data, token);\n  }\n  async addCard(newCard, token) {\n    return await this.fetchData(`${this._url}/cards`, 'POST', newCard, token);\n  }\n\n  async dislikeCard(resource, card_Id) {\n    return await this.fetchData(\n      `${this._url}/${resource}/${card_Id}`,\n      'DELETE'\n    );\n  }\n}\nconst api = new Api();\n\nexport default api;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}