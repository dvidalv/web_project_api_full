{"ast":null,"code":"class Api {\n  constructor() {\n    this._url = 'https://api.alrededorusa.mooo.com';\n  }\n  async fetchData(url, method, data, token) {\n    try {\n      if (method === 'GET') {\n        const resp = await fetch(`${url}`, {\n          method,\n          headers: {\n            authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (resp.ok) {\n          return await resp.json();\n        }\n        return await Promise.reject(`Error: ${resp.status}`);\n      }\n      if (method === 'DELETE') {\n        const resp = await fetch(`${url}`, {\n          method,\n          headers: {\n            authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (resp.ok) {\n          return await resp.json();\n        }\n        return await Promise.reject(`Error: ${resp.status}`);\n      }\n      const result = await fetch(`${url}`, {\n        method,\n        headers: {\n          authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      });\n      if (result.ok) {\n        return await result.json();\n      }\n      return await Promise.reject(`Error: ${result.status}`);\n    } catch (error) {\n      throw error;\n    }\n  }\n  async changeLikeCardStatus(id, isLike, token) {\n    return await this.fetchData(`${this._url}cards/likes/${id}`, isLike ? 'PUT' : 'DELETE', isLike ? {\n      like: true\n    } : {\n      like: false\n    }, token);\n  }\n  async deleteCard(resource, cardId, token) {\n    return await this.fetchData(`${this._url}${resource}/${cardId}`, 'DELETE', null, token);\n  }\n  async getUserInfo(token) {\n    return await this.fetchData(`${this._url}/users/me`, 'GET', null, token);\n  }\n  async getInitialCards(token) {\n    // console.log(this._url);\n    return await this.fetchData(`${this._url}/cards`, 'GET', null, token);\n  }\n  async getUserAvatar(resource) {\n    return await this.fetchData(`${this._url}/${resource}`, 'GET');\n  }\n  async setUserAvatar(data, token) {\n    return await this.fetchData(`${this._url}/users/me/avatar`, 'PATCH', data, token);\n  }\n  async patchUserInfo(data, token) {\n    return await this.fetchData(`${this._url}/users/me`, 'PATCH', data, token);\n  }\n  async addCard(newCard, token) {\n    return await this.fetchData(`${this._url}/cards`, 'POST', newCard, token);\n  }\n  async dislikeCard(resource, card_Id) {\n    return await this.fetchData(`${this._url}/${resource}/${card_Id}`, 'DELETE');\n  }\n}\nconst api = new Api();\nexport default api;","map":{"version":3,"names":["Api","constructor","_url","fetchData","url","method","data","token","resp","fetch","headers","authorization","ok","json","Promise","reject","status","result","body","JSON","stringify","error","changeLikeCardStatus","id","isLike","like","deleteCard","resource","cardId","getUserInfo","getInitialCards","getUserAvatar","setUserAvatar","patchUserInfo","addCard","newCard","dislikeCard","card_Id","api"],"sources":["/Users/dvidalv/Dev/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor() {\n    this._url = 'https://api.alrededorusa.mooo.com';\n  }\n  async fetchData(url, method, data, token) {\n    try {\n      if (method === 'GET') {\n        const resp = await fetch(`${url}`, {\n          method,\n          headers: {\n            authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        if (resp.ok) {\n          return await resp.json();\n        }\n        return await Promise.reject(`Error: ${resp.status}`);\n      }\n\n      if (method === 'DELETE') {\n        const resp = await fetch(`${url}`, {\n          method,\n          headers: {\n            authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        if (resp.ok) {\n          return await resp.json();\n        }\n        return await Promise.reject(`Error: ${resp.status}`);\n      }\n\n      const result = await fetch(`${url}`, {\n        method,\n        headers: {\n          authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (result.ok) {\n        return await result.json();\n      }\n\n      return await Promise.reject(`Error: ${result.status}`);\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async changeLikeCardStatus(id, isLike, token) {\n    return await this.fetchData(\n      `${this._url}cards/likes/${id}`,\n      isLike ? 'PUT' : 'DELETE',\n      isLike ? { like: true } : { like: false },\n      token\n    );\n  }\n\n  async deleteCard(resource, cardId, token) {\n    return await this.fetchData(\n      `${this._url}${resource}/${cardId}`,\n      'DELETE',\n      null,\n      token\n    );\n  }\n\n  async getUserInfo(token) {\n    return await this.fetchData(`${this._url}/users/me`, 'GET', null, token);\n  }\n\n  async getInitialCards(token) {\n    // console.log(this._url);\n    return await this.fetchData(`${this._url}/cards`, 'GET', null, token);\n  }\n\n  async getUserAvatar(resource) {\n    return await this.fetchData(`${this._url}/${resource}`, 'GET');\n  }\n  async setUserAvatar(data, token) {\n    return await this.fetchData(\n      `${this._url}/users/me/avatar`,\n      'PATCH',\n      data,\n      token\n    );\n  }\n\n  async patchUserInfo(data, token) {\n    return await this.fetchData(`${this._url}/users/me`, 'PATCH', data, token);\n  }\n  async addCard(newCard, token) {\n    return await this.fetchData(`${this._url}/cards`, 'POST', newCard, token);\n  }\n\n  async dislikeCard(resource, card_Id) {\n    return await this.fetchData(\n      `${this._url}/${resource}/${card_Id}`,\n      'DELETE'\n    );\n  }\n}\nconst api = new Api();\n\nexport default api;\n"],"mappings":"AAAA,MAAMA,GAAG,CAAC;EACRC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,IAAI,GAAG,mCAAmC;EACjD;EACA,MAAMC,SAASA,CAACC,GAAG,EAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAE;IACxC,IAAI;MACF,IAAIF,MAAM,KAAK,KAAK,EAAE;QACpB,MAAMG,IAAI,GAAG,MAAMC,KAAK,CAAE,GAAEL,GAAI,EAAC,EAAE;UACjCC,MAAM;UACNK,OAAO,EAAE;YACPC,aAAa,EAAG,UAASJ,KAAM,EAAC;YAChC,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACF,IAAIC,IAAI,CAACI,EAAE,EAAE;UACX,OAAO,MAAMJ,IAAI,CAACK,IAAI,CAAC,CAAC;QAC1B;QACA,OAAO,MAAMC,OAAO,CAACC,MAAM,CAAE,UAASP,IAAI,CAACQ,MAAO,EAAC,CAAC;MACtD;MAEA,IAAIX,MAAM,KAAK,QAAQ,EAAE;QACvB,MAAMG,IAAI,GAAG,MAAMC,KAAK,CAAE,GAAEL,GAAI,EAAC,EAAE;UACjCC,MAAM;UACNK,OAAO,EAAE;YACPC,aAAa,EAAG,UAASJ,KAAM,EAAC;YAChC,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;QACF,IAAIC,IAAI,CAACI,EAAE,EAAE;UACX,OAAO,MAAMJ,IAAI,CAACK,IAAI,CAAC,CAAC;QAC1B;QACA,OAAO,MAAMC,OAAO,CAACC,MAAM,CAAE,UAASP,IAAI,CAACQ,MAAO,EAAC,CAAC;MACtD;MAEA,MAAMC,MAAM,GAAG,MAAMR,KAAK,CAAE,GAAEL,GAAI,EAAC,EAAE;QACnCC,MAAM;QACNK,OAAO,EAAE;UACPC,aAAa,EAAG,UAASJ,KAAM,EAAC;UAChC,cAAc,EAAE;QAClB,CAAC;QACDW,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACd,IAAI;MAC3B,CAAC,CAAC;MAEF,IAAIW,MAAM,CAACL,EAAE,EAAE;QACb,OAAO,MAAMK,MAAM,CAACJ,IAAI,CAAC,CAAC;MAC5B;MAEA,OAAO,MAAMC,OAAO,CAACC,MAAM,CAAE,UAASE,MAAM,CAACD,MAAO,EAAC,CAAC;IACxD,CAAC,CAAC,OAAOK,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF;EAEA,MAAMC,oBAAoBA,CAACC,EAAE,EAAEC,MAAM,EAAEjB,KAAK,EAAE;IAC5C,OAAO,MAAM,IAAI,CAACJ,SAAS,CACxB,GAAE,IAAI,CAACD,IAAK,eAAcqB,EAAG,EAAC,EAC/BC,MAAM,GAAG,KAAK,GAAG,QAAQ,EACzBA,MAAM,GAAG;MAAEC,IAAI,EAAE;IAAK,CAAC,GAAG;MAAEA,IAAI,EAAE;IAAM,CAAC,EACzClB,KACF,CAAC;EACH;EAEA,MAAMmB,UAAUA,CAACC,QAAQ,EAAEC,MAAM,EAAErB,KAAK,EAAE;IACxC,OAAO,MAAM,IAAI,CAACJ,SAAS,CACxB,GAAE,IAAI,CAACD,IAAK,GAAEyB,QAAS,IAAGC,MAAO,EAAC,EACnC,QAAQ,EACR,IAAI,EACJrB,KACF,CAAC;EACH;EAEA,MAAMsB,WAAWA,CAACtB,KAAK,EAAE;IACvB,OAAO,MAAM,IAAI,CAACJ,SAAS,CAAE,GAAE,IAAI,CAACD,IAAK,WAAU,EAAE,KAAK,EAAE,IAAI,EAAEK,KAAK,CAAC;EAC1E;EAEA,MAAMuB,eAAeA,CAACvB,KAAK,EAAE;IAC3B;IACA,OAAO,MAAM,IAAI,CAACJ,SAAS,CAAE,GAAE,IAAI,CAACD,IAAK,QAAO,EAAE,KAAK,EAAE,IAAI,EAAEK,KAAK,CAAC;EACvE;EAEA,MAAMwB,aAAaA,CAACJ,QAAQ,EAAE;IAC5B,OAAO,MAAM,IAAI,CAACxB,SAAS,CAAE,GAAE,IAAI,CAACD,IAAK,IAAGyB,QAAS,EAAC,EAAE,KAAK,CAAC;EAChE;EACA,MAAMK,aAAaA,CAAC1B,IAAI,EAAEC,KAAK,EAAE;IAC/B,OAAO,MAAM,IAAI,CAACJ,SAAS,CACxB,GAAE,IAAI,CAACD,IAAK,kBAAiB,EAC9B,OAAO,EACPI,IAAI,EACJC,KACF,CAAC;EACH;EAEA,MAAM0B,aAAaA,CAAC3B,IAAI,EAAEC,KAAK,EAAE;IAC/B,OAAO,MAAM,IAAI,CAACJ,SAAS,CAAE,GAAE,IAAI,CAACD,IAAK,WAAU,EAAE,OAAO,EAAEI,IAAI,EAAEC,KAAK,CAAC;EAC5E;EACA,MAAM2B,OAAOA,CAACC,OAAO,EAAE5B,KAAK,EAAE;IAC5B,OAAO,MAAM,IAAI,CAACJ,SAAS,CAAE,GAAE,IAAI,CAACD,IAAK,QAAO,EAAE,MAAM,EAAEiC,OAAO,EAAE5B,KAAK,CAAC;EAC3E;EAEA,MAAM6B,WAAWA,CAACT,QAAQ,EAAEU,OAAO,EAAE;IACnC,OAAO,MAAM,IAAI,CAAClC,SAAS,CACxB,GAAE,IAAI,CAACD,IAAK,IAAGyB,QAAS,IAAGU,OAAQ,EAAC,EACrC,QACF,CAAC;EACH;AACF;AACA,MAAMC,GAAG,GAAG,IAAItC,GAAG,CAAC,CAAC;AAErB,eAAesC,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}